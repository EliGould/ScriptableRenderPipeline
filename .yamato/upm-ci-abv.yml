editors:
  - version: 2019.3
    cmd: -u 2019.3/staging
  - version: fast-2019.3
    cmd: -u 2019.3/staging --fast
projects:
  - name: Universal
    folder: UniversalGraphicsTest
  - name: Universal_Stereo
    folder: UniversalGfxTestStereo
  - name: ShaderGraph
    folder: ShaderGraph
  - name: ShaderGraph_Stereo
    folder: ShaderGraphUniversalStereo
  - name: PostProcessing
    folder: PostProcessing
  - name: HDRP
    folder: HDRP_Tests
  - name: HDRP_Standalone
    folder: HDRP_RuntimeTests
  - name: VFXMain
    folder: VisualEffectGraph
  - name: VFX_LWRP
    folder: VisualEffectGraph_LWRP
---
{% for editor in editors %}
all_project_ci_{{ editor.version }}:
  name: ABV for SRP repository - {{ editor.version }}
  agent:
    name: whatever
    type: Unity::VM
    image: cds-ops/ubuntu-18.04-agent:latest
    flavor: b1.small
  commands:
  - dir
  dependencies:
  {% for project in projects %}
    - path: .yamato/upm-ci-{{ project.name | downcase }}.yml#All_{{ project.name }}_{{ editor.version }}
      rerun: always
  {% endfor %}
{% endfor %}

all_project_ci_nightly:
  name: Nightly ABV against 2019.3/staging
  agent:
    type: Unity::VM
    image: cds-ops/ubuntu-18.04-agent:latest
    flavor: b1.small
  commands:
  - dir
  dependencies:
  {% for project in projects %}
    - path: .yamato/upm-ci-{{ project.name | downcase }}.yml#All_{{ project.name }}_2019.3
      rerun: always
  {% endfor %}  
  triggers:
    recurring:
      - branch: release/2019.3
        frequency: daily
  artifacts:
    logs:
      paths:
        - "**/test-results/**"
